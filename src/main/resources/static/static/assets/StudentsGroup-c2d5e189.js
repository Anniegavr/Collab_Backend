var _=Object.defineProperty;var f=(e,n,s)=>n in e?_(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;var i=(e,n,s)=>(f(e,typeof n!="symbol"?n+"":n,s),s);import{S}from"./SearchField-9361ba50.js";import{S as y}from"./SearchIcon-55360174.js";import{a as u}from"./axios-aba6f0e0.js";import{_ as w,e as G,o as p,a as h,b as t,f as b,F as g,i as v,t as r,L as x,M as C}from"./index-f9d7a4ee.js";class k{constructor(n,s,l,d,a){i(this,"id");i(this,"name");i(this,"year");i(this,"email");i(this,"specialty");this.id=n,this.name=s,this.year=l,this.email=d,this.specialty=a}}const E={name:"AddGroup",components:{SearchField:S,SearchIcon:y},studentGroups:[],data(){return{studentGroups:this.fetchStudentGroups(),searchTerm:""}},computed:{filteredStudentGroups(){if(this.searchTerm){console.log(this.studentGroups.filter(n=>n.name.toLowerCase()));const e=this.studentGroups.indexOf(n=>n.name.toLowerCase().includes(this.searchTerm.toLowerCase()));return this.studentGroups[e]}else return this.studentGroups}},methods:{fetchStudentGroups(){u.get("http://localhost:8080/student_groups/all").then(e=>{this.studentGroups=e.data}).catch(e=>{console.log(e)})},editStudentGroup(e){const n=this.studentGroups.indexOf(e);if(n!==-1){const s=prompt("Enter the new name:",e.name),l=prompt("Enter the new email:",e.email),d=prompt("Enter the new year:",e.year),a=prompt("Enter the new specialty:",e.specialty);if(s||l||d||a){const c=new k(e.id,s,d,l,a);u.put("http://localhost:8080/admin/student_groups/edit/",c).then(o=>{this.studentGroups[n]=this.fetchStudentGroups(),console.log("Modified types: ".concat(o.data))}).catch(o=>{this.studentGroups[n]=c,alert("Success"),console.log(o)})}}},deleteStudentGroup(e){const n=this.studentGroups.findIndex(s=>s.id===e.id);n!==-1&&confirm(`Are you sure you want to delete ${e.name}?`)&&u.delete("http://localhost:8080/admin/studentGroups/delete/"+e.id).then(l=>{this.studentGroups=this.fetchStudentGroups(),console.log("Modified types: ".concat(l.data))}).catch(l=>{this.studentGroups.splice(n,1),alert("Success"),console.log(l)})}}},I=e=>(x("data-v-190dde5b"),e=e(),C(),e),F={id:"app"},L={class:"admin-panel",onload:"window.location.reload()"},N={class:"common_table"},T=I(()=>t("thead",null,[t("tr",null,[t("th",null,[t("span",null,"ID")]),t("th",null,[t("span",null,"Name")]),t("th",null,[t("span",null,"Year")]),t("th",null,[t("span",null,"Email")]),t("th",null,[t("span",null,"Specialty")]),t("th",null,[t("span",null,"Action")])])],-1)),A=["onClick"],B=["onClick"];function D(e,n,s,l,d,a){const c=G("SearchField");return p(),h("div",F,[t("div",L,[b(c,{"search-term":d.searchTerm},null,8,["search-term"]),t("table",N,[T,t("tbody",null,[(p(!0),h(g,null,v(a.filteredStudentGroups,o=>(p(),h("tr",{key:o.id},[t("td",null,r(o.id),1),t("td",null,r(o.name),1),t("td",null,r(o.year),1),t("td",null,r(o.email),1),t("td",null,r(o.specialty),1),t("td",null,[t("button",{class:"edit-btn",onClick:m=>a.editStudentGroup(o)},"Edit",8,A),t("button",{class:"delete-btn",onClick:m=>a.deleteStudentGroup(o)},"Delete",8,B)])]))),128))])]),t("button",{class:"addRecord",onClick:n[0]||(n[0]=(...o)=>e.addStudentGroup&&e.addStudentGroup(...o))},"+")])])}const R=w(E,[["render",D],["__scopeId","data-v-190dde5b"]]);export{R as default};
