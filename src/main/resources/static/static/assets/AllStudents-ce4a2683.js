import{a as r}from"./axios-aba6f0e0.js";import{S as p}from"./SearchIcon-55360174.js";import{S as f}from"./SearchField-9361ba50.js";import{_,e as S,o as h,a as m,b as t,f as N,F as y,i as w,t as c,L as E,M as g}from"./index-f9d7a4ee.js";const b={name:"AllStudents",components:{SearchField:f,SearchIcon:p},students:[],data(){return{students:this.fetchStudents(),searchTerm:""}},computed:{filteredStudents(){return this.searchTerm?(console.log(this.students.filter(e=>e.firstName.toLowerCase())),this.students.filter(e=>e.firstName.toLowerCase().includes(this.searchTerm.toLowerCase()))):this.students}},methods:{fetchStudents(){r.get("http://localhost:8080/students").then(e=>{this.students=e.data}).catch(e=>{console.log(e)})},editStudent(e){const n=this.students.findIndex(o=>o.id===e.id);if(n!==-1){const o=prompt("Enter the new firstname:",e.firstName),l=prompt("Enter the new lastname:",e.lastName),d=prompt("Enter the new email:",e.email),a=prompt("Enter the new email:",e.specialty);if(o||l||d||a){this.students[n].firstName=o,this.students[n].lastName=l,this.students[n].email=d,this.students[n].specialty=a;const i={id:e.id,firstName:o,lastName:l,email:d,specialty:a};r.put("http://localhost:8080/admin/update_student/"+e.id,i).then(s=>{this.students=this.fetchStudents(),console.log(s.status+`
 `+s.data)}).catch(s=>{console.log(s)})}}},deleteStudent(e){const n=this.students.indexOf(e);n!==-1&&confirm(`Are you sure you want to delete ${e.firstName} ${e.lastName} ?`)&&(console.log("aha, id "+e.id),r.delete("http://localhost:8080/admin/del_student/"+e.id).then(l=>{this.students=this.fetchStudents(),console.log(l.status+`
 `+l.data)}).catch(l=>{this.students.splice(n,1),alert("Success"),console.log(l)}))},addStudent(){const e=prompt("Enter the firstname:"),n=prompt("Enter the lastname:"),o=prompt("Enter the email:"),l=prompt("Enter the specialty:"),d=prompt("Enter the year:",1),a={firstName:e,lastName:n,email:o,specialty:l,year:d};r.post("http://localhost:8080/admin/add_student",a).then(i=>{this.students.push(i.data),console.log("Added student: ".concat(i.data))}).catch(i=>{this.students.push(a),alert("Success"),console.log(i)})}}},v=e=>(E("data-v-95430753"),e=e(),g(),e),x={id:"app"},C={class:"admin-panel",onload:"window.location.reload()"},k={class:"common_table"},F=v(()=>t("thead",null,[t("tr",null,[t("th",null,[t("span",null,"ID")]),t("th",null,[t("span",null,"First Name")]),t("th",null,[t("span",null,"Last Name")]),t("th",null,[t("span",null,"Email")]),t("th",null,[t("span",null,"Year")]),t("th",null,[t("span",null,"Specialty")]),t("th",null,[t("span",null,"Action")])])],-1)),I=["onClick"],L=["onClick"];function A(e,n,o,l,d,a){const i=S("SearchField");return h(),m("div",x,[t("div",C,[N(i,{"search-term":d.searchTerm},null,8,["search-term"]),t("table",k,[F,t("tbody",null,[(h(!0),m(y,null,w(a.filteredStudents,s=>(h(),m("tr",{key:s.id},[t("td",null,c(s.id),1),t("td",null,c(s.firstName),1),t("td",null,c(s.lastName),1),t("td",null,c(s.email),1),t("td",null,c(s.year),1),t("td",null,c(s.specialty),1),t("td",null,[t("button",{class:"edit-btn",onClick:u=>a.editStudent(s)},"Edit",8,I),t("button",{class:"delete-btn",onClick:u=>a.deleteStudent(s)},"Delete",8,L)])]))),128))])]),t("button",{class:"addRecord",onClick:n[0]||(n[0]=(...s)=>a.addStudent&&a.addStudent(...s))},"+")])])}const $=_(b,[["render",A],["__scopeId","data-v-95430753"]]);export{$ as default};
