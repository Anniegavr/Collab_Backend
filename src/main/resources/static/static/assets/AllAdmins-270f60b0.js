import{a as m}from"./axios-aba6f0e0.js";import{S as u}from"./SearchIcon-55360174.js";import{S as f}from"./SearchField-9361ba50.js";import{_,e as A,o as r,a as h,b as e,f as N,F as w,i as y,t as c,L as S,M as g}from"./index-f9d7a4ee.js";const E={name:"AllAdmins",components:{SearchField:f,SearchIcon:u},admins:[],data(){return{admins:this.fetchAdmins(),searchTerm:""}},computed:{filteredAdmins(){return this.searchTerm?(console.log(this.admins.filter(t=>t.firstName.toLowerCase())),this.admins.filter(t=>t.firstName.toLowerCase().includes(this.searchTerm.toLowerCase()))):this.admins}},methods:{fetchAdmins(){m.get("http://localhost:8080/admin/all_admins").then(t=>{this.admins=t.data}).catch(t=>{console.log(t)})},editAdmin(t){const n=this.admins.findIndex(i=>i.id===t.id);if(n!==-1){const i=prompt("Enter the new firstname:",t.firstName),l=prompt("Enter the new lastname:",t.lastName),d=prompt("Enter the new email:",t.email),a=prompt("Enter the new email:",t.specialty);if(i||l||d||a){this.admins[n].firstName=i,this.admins[n].lastName=l,this.admins[n].email=d,this.admins[n].specialty=a;const o={id:t.id,firstName:i,lastName:l,email:d,specialty:a};m.put("http://localhost:8080/admin/"+o.id,o).then(s=>{this.admins=this.fetchAdmins(),console.log(s.status+`
 `+s.data)}).catch(s=>{console.log(s)})}}},deleteAdmin(t){const n=this.admins.indexOf(t);n!==-1&&confirm(`Are you sure you want to delete ${t.firstName} ${t.lastName} ?`)&&m.delete("http://localhost:8080/admin/"+t.id).then(l=>{this.admins=this.fetchAdmins(),console.log(l.status+`
 `+l.data)}).catch(l=>{this.admins.splice(n,1),alert("Success"),console.log(l)})},addAdmin(){const t=prompt("Enter the firstname:"),n=prompt("Enter the lastname:"),i=prompt("Enter the email:"),l=prompt("Enter the specialty:"),d=prompt("Enter the username:",t.toLowerCase().charAt(0)+n.toLowerCase()),a={firstName:t,lastName:n,email:i,specialty:l,username:d};console.log(a),m.post("http://localhost:8080/admin/add_admin",a).then(o=>{this.admins.push(o.data),console.log("Added admin: ".concat(o.data))}).catch(o=>{this.admins.push(a),alert("Success"),console.log(o)})}}},C=t=>(S("data-v-d95196f7"),t=t(),g(),t),b={id:"app"},v={class:"admin-panel",onload:"window.location.reload()"},x={class:"common_table"},L=C(()=>e("thead",null,[e("tr",null,[e("th",null,[e("span",null,"ID")]),e("th",null,[e("span",null,"First Name")]),e("th",null,[e("span",null,"Last Name")]),e("th",null,[e("span",null,"Email")]),e("th",null,[e("span",null,"Specialty")]),e("th",null,[e("span",null,"Action")])])],-1)),k=["onClick"],F=["onClick"];function I(t,n,i,l,d,a){const o=A("SearchField");return r(),h("div",b,[e("div",v,[N(o,{"search-term":d.searchTerm},null,8,["search-term"]),e("table",x,[L,e("tbody",null,[(r(!0),h(w,null,y(a.filteredAdmins,s=>(r(),h("tr",{key:s.id},[e("td",null,c(s.id.toString()),1),e("td",null,c(s.firstName),1),e("td",null,c(s.lastName),1),e("td",null,c(s.email),1),e("td",null,c(s.specialty),1),e("td",null,[e("button",{class:"edit-btn",onClick:p=>a.editAdmin(s)},"Edit",8,k),e("button",{class:"delete-btn",onClick:p=>a.deleteAdmin(s)},"Delete",8,F)])]))),128))])]),e("button",{class:"addRecord",onClick:n[0]||(n[0]=(...s)=>a.addAdmin&&a.addAdmin(...s))},"+")])])}const $=_(E,[["render",I],["__scopeId","data-v-d95196f7"]]);export{$ as default};
