var f=Object.defineProperty;var _=(e,s,a)=>s in e?f(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a;var i=(e,s,a)=>(_(e,typeof s!="symbol"?s+"":s,a),a);import{S as N}from"./SearchField-9361ba50.js";import{S as T}from"./SearchIcon-55360174.js";import{a as h}from"./axios-aba6f0e0.js";import{_ as y,e as w,o as m,a as p,b as t,f as g,F as S,i as x,t as r,L as E,M as b}from"./index-f9d7a4ee.js";class v{constructor(s,a,n){i(this,"firstName");i(this,"lastName");i(this,"email");this.firstName=s,this.lastName=a,this.email=n}}class C extends v{constructor(a,n,o,c){super(a,n,o);i(this,"specialty");this.specialty=c}}const k={name:"TeachersPage",components:{SearchField:N,SearchIcon:T},teachers:[],data(){return{teachers:this.fetchTeachers(),searchTerm:""}},computed:{filteredTeachers(){return this.searchTerm?(console.log(this.teachers.filter(e=>e.firstName.toLowerCase())),this.teachers.filter(e=>e.firstName.toLowerCase().includes(this.searchTerm.toLowerCase()))):this.teachers}},methods:{fetchTeachers(){h.get("http://localhost:8080/teachers").then(e=>{this.teachers=e.data}).catch(e=>{console.log(e)})},editTeacher(e){const s=this.teachers.indexOf(e);if(s!==-1){const a=prompt("Enter the new firstname:",e.firstName),n=prompt("Enter the new lastname:",e.lastName),o=prompt("Enter the new email:",e.email),c=prompt("Enter the new specialty:",e.specialty);if(a||n||o||c){const d=new C(e.firstName,e.lastName,e.email,e.specialty);h.put("http://localhost:8080/admin/teachers/edit/",d).then(l=>{this.teachers[s]=l.data,console.log("Modified types: ".concat(l.data))}).catch(l=>{this.teachers[s]=d,alert("Success"),console.log(l)}),this.fetchTeachers()}}},deleteTeacher(e){this.teachers.indexOf(e)!==-1&&confirm(`Are you sure you want to delete ${e.firstName} ${e.lastName} ?`)&&h.delete("http://localhost:8080/admin/teachers/delete/"+e.id).then(n=>{this.teachers=this.fetchTeachers(),console.log("Modified types: ".concat(n.data))}).catch(n=>{const o=this.teachers.indexOf(e);this.teachers.splice(o,1),alert("Success"),console.log(n)})},addTeacher(){const e=prompt("Enter the firstname:"),s=prompt("Enter the lastname:"),a=prompt("Enter the email:"),n=prompt("Enter the specialty:"),o={firstName:e,lastName:s,email:a,specialty:n};h.post("http://localhost:8080/admin/add_teacher",o).then(c=>{this.teachers=c.data,console.log("Added teacher: ".concat(c.data))}).catch(c=>{this.teachers.push(o),alert("Success"),console.log(c)})}}},F=e=>(E("data-v-7d0cf5c3"),e=e(),b(),e),L={id:"app"},I={class:"admin-panel",onload:"window.location.reload()"},A={class:"common_table"},B=F(()=>t("thead",null,[t("tr",null,[t("th",null,[t("span",null,"ID")]),t("th",null,[t("span",null,"First Name")]),t("th",null,[t("span",null,"Last Name")]),t("th",null,[t("span",null,"Email")]),t("th",null,[t("span",null,"Year")]),t("th",null,[t("span",null,"Specialty")]),t("th",null,[t("span",null,"Action")])])],-1)),D=["onClick"],M=["onClick"];function O(e,s,a,n,o,c){const d=w("SearchField");return m(),p("div",L,[t("div",I,[g(d,{"search-term":o.searchTerm},null,8,["search-term"]),t("table",A,[B,t("tbody",null,[(m(!0),p(S,null,x(c.filteredTeachers,l=>(m(),p("tr",{key:l.id},[t("td",null,r(l.id),1),t("td",null,r(l.firstName),1),t("td",null,r(l.lastName),1),t("td",null,r(l.email),1),t("td",null,r(l.specialty),1),t("td",null,[t("button",{class:"edit-btn",onClick:u=>c.editTeacher(l)},"Edit",8,D),t("button",{class:"delete-btn",onClick:u=>c.deleteTeacher(l)},"Delete",8,M)])]))),128))])]),t("button",{class:"addRecord",onClick:s[0]||(s[0]=(...l)=>c.addTeacher&&c.addTeacher(...l))},"+")])])}const Y=y(k,[["render",O],["__scopeId","data-v-7d0cf5c3"]]);export{Y as default};
